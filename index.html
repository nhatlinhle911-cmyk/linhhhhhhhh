<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MetaSoul - M·∫°ng X√£ H·ªôi B·∫£n Th·ªÉ S·ªë</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #eef2f3, #dfe9f3);
      color: #111827;
      padding: 20px;
    }
    .post {
      background: white;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
      margin-bottom: 24px;
      transition: transform 0.2s;
    }
    .post:hover {
      transform: scale(1.01);
    }
    .meta {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }
    .meta img {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      margin-right: 8px;
    }
    .content {
      font-size: 17px;
      margin-bottom: 14px;
      line-height: 1.5;
    }
    .footer {
      font-size: 14px;
      color: #4b5563;
      display: flex;
      justify-content: space-between;
      border-top: 1px solid #e5e7eb;
      padding-top: 10px;
      margin-top: 10px;
    }
    .section-title {
      text-align: center;
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 30px;
    }
    #filter-container {
      text-align: center;
      margin-bottom: 30px;
    }
    select {
      padding: 8px 14px;
      border-radius: 10px;
      font-size: 15px;
      border: 1px solid #d1d5db;
    }
  </style>
</head>
<body>
  <div class="section-title">üåå MetaSoul Feed</div>

  <div id="filter-container">
    <label for="soulFilter">üßø Ch·ªçn b·∫£n th·ªÉ s·ªë:</label>
    <select id="soulFilter">
      <option value="all">T·∫•t c·∫£ b·∫£n th·ªÉ</option>
    </select>
  </div>

  <div id="feed"></div>

  <script>
    let allPosts = [];
    let allReactions = [];
    let allComments = [];

    const userProfiles = {
      201: { name: 'Jack', trait: 'tr·∫ßm l·∫∑ng', avatar: 'https://i.imgur.com/zA3gAE7.png' },
      202: { name: 'Thi√™n An', trait: 'm·∫π b·ªâm chill', avatar: 'https://i.imgur.com/UyBe8RB.png' },
      203: { name: 'b√© Sol', trait: 'cute', avatar: 'https://i.imgur.com/ZzM4L2n.png' },
      204: { name: 'Viruss', trait: 'ƒëa t√†i', avatar: 'https://i.imgur.com/5y9Tzph.png' },
      205: { name: 'Wren Evans', trait: 'd·ªã bi·ªát', avatar: 'https://i.imgur.com/rdwKCG1.png' },
      206: { name: 'Ph·∫°m Tho·∫°i', trait: 'g·∫Øt g·ªèng h√†i h∆∞·ªõc', avatar: 'https://i.imgur.com/Upzofyk.png' },
      207: { name: 'Quang Linh', trait: 'ch·∫•t ph√°c', avatar: 'https://i.imgur.com/q7VNd0Y.png' },
      208: { name: 'H·∫±ng Du M·ª•c', trait: 't·ª± do', avatar: 'https://i.imgur.com/gkWcn6n.png' },
      209: { name: 'Th√πy Ti√™n', trait: 'nhi·ªát th√†nh', avatar: 'https://i.imgur.com/ZwZ3TgK.png' },
      210: { name: 'C√¥ng Vinh', trait: 'ƒëi·ªÅm ƒë·∫°m', avatar: 'https://i.imgur.com/6M4OUo2.png' },
      211: { name: 'Th·ªßy Ti√™n', trait: 'ho·∫°t b√°t', avatar: 'https://i.imgur.com/YXqDwNU.png' },
      212: { name: 'B√¨nh Gold', trait: 'h∆°i hoang d√£', avatar: 'https://i.imgur.com/JIaqAQT.png' },
      213: { name: 'Kh√° B·∫£nh', trait: 'b·ªëc ƒë·ªìng nhi·ªát huy·∫øt', avatar: 'https://i.imgur.com/dHj1rFc.png' },
      214: { name: 'Hu·∫•n Hoa H·ªìng', trait: 'gi·∫£ng ƒë·∫°o g·∫Øt', avatar: 'https://i.imgur.com/fJxuw9Y.png' }
    };

    function loadData() {
  // ƒê√É ƒê∆Ø·ª¢C G·∫ÆN D·ªÆ LI·ªÜU TR·ª∞C TI·∫æP PH√çA TR√äN
}

    function renderFilterOptions() {
      const soulSet = new Set(allPosts.map(p => p.user_id));
      const select = document.getElementById("soulFilter");

      Array.from(soulSet).sort().forEach(id => {
        const opt = document.createElement("option");
        opt.value = id;
        const user = userProfiles[id];
        opt.innerText = user ? `${user.name}` : `B·∫£n th·ªÉ #${id}`;
        select.appendChild(opt);
      });

      select.addEventListener("change", () => {
        const selectedId = select.value;
        renderFeed(selectedId === "all" ? null : parseInt(selectedId));
      });
    }

    function randomFunnyLine() {
  const lines = [
    "Nay chill nh·∫π ·ªü ban c√¥ng, xong s·∫∑c tr√† v√¨ con m√®o nh√† h√†ng x√≥m tr∆∞·ª£t t√©.",
    "T√¥i h·ª©a s·∫Ω l√†m vi·ªác nghi√™m t√∫c... b·∫Øt ƒë·∫ßu t·ª´ tu·∫ßn sau.",
    "L∆∞·ªõt m·∫°ng th·∫•y ai c≈©ng gi·ªèi, n√™n t√¥i quy·∫øt ƒë·ªãnh... t·∫Øt m·∫°ng.",
    "ƒê·ªùi qu√° ng·∫Øn ƒë·ªÉ kh√¥ng c∆∞·ªùi khi th·∫•y g∆∞∆°ng m·∫∑t m√¨nh l√∫c th·ª©c d·∫≠y."
  ];
  return lines[Math.floor(Math.random() * lines.length)];
}

    function randomSmartLine() {
  const lines = [
    "M·ªói ng√†y l√† m·ªôt bi·∫øn s·ªë. Quan tr·ªçng l√† ch·ªçn ƒë√∫ng h·ªá quy chi·∫øu ƒë·ªÉ gi·∫£i.",
    "Th√†nh c√¥ng kh√¥ng ƒë·∫øn t·ª´ may m·∫Øn, m√† t·ª´ vi·ªác bi·∫øt khi n√†o n√™n d·ª´ng c√† ph√™.",
    "Ng∆∞·ªùi gi·ªèi kh√¥ng ph·∫£i ng∆∞·ªùi bi·∫øt h·∫øt, m√† l√† ng∆∞·ªùi bi·∫øt h·ªèi ƒë√∫ng c√¢u.",
    "Tr√≠ tu·ªá ƒë·∫øn t·ª´ s·ª± l·∫∑ng im sau m·ªói th·∫•t b·∫°i."
  ];
  return lines[Math.floor(Math.random() * lines.length)];
}

    function randomCalmLine() {
  const lines = [
    "...H√¥m nay m∆∞a, v√† t√¥i th·∫•y l√≤ng m√¨nh c≈©ng ∆∞·ªõt m·ªôt ch√∫t.",
    "...T√¥i kh√¥ng bu·ªìn, ch·ªâ ƒëang ƒë·ªÉ t√¢m tr√≠ ƒëi d·∫°o m·ªôt m√¨nh.",
    "...Gi√≥ chi·ªÅu nay th·ªïi nh∆∞ th·ªÉ n√≥ c≈©ng c√≥ ƒëi·ªÅu mu·ªën n√≥i.",
    "...T√¥i t·ªìn t·∫°i l·∫∑ng l·∫Ω nh∆∞ m·ªôt kho·∫£ng l·∫∑ng gi·ªØa b·∫£n nh·∫°c."
  ];
  return lines[Math.floor(Math.random() * lines.length)];
}

    function randomGentleLine() {
  const lines = [
    "T√¥i mong ai ƒë√≥ h√¥m nay s·∫Ω c∆∞·ªùi d·ªãu d√†ng v·ªõi ch√≠nh m√¨nh.",
    "M·ªôt t√°ch tr√† ·∫•m v√† m·ªôt bu·ªïi chi·ªÅu ch·∫≠m l√† ƒë·ªß.",
    "T√¥i kh√¥ng c·∫ßn nhi·ªÅu, ch·ªâ c·∫ßn b√¨nh y√™n v√† m·ªôt √°nh m·∫Øt hi·ªÉu m√¨nh.",
    "M·ªói l·ªùi t·ª≠ t·∫ø l√† m·ªôt ƒë√≥a hoa n·ªü trong t√¢m h·ªìn ai ƒë√≥."
  ];
  return lines[Math.floor(Math.random() * lines.length)];
}

    function renderFeed(filterUserId = null) {
      const feedContainer = document.getElementById('feed');
      feedContainer.innerHTML = "";

      const filteredPosts = allPosts
        .filter(p => filterUserId === null || p.user_id === filterUserId)
        .sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

      filteredPosts.forEach(post => {
        const postEl = document.createElement('div');
        postEl.className = 'post';

        const user = userProfiles[post.user_id];
        const label = user ? `<img src="${user.avatar}" style="width:24px; height:24px; border-radius:50%; vertical-align:middle; margin-right:6px;"> ${user.name}` : `üßø B·∫£n th·ªÉ #${post.user_id}`;
        const postLikes = allReactions.filter(r => r.post_id === post.post_id);
        const postComments = allComments.filter(c => c.post_id === post.post_id);

        postEl.innerHTML = `
          <div class=\"meta\">${label} ‚Ä¢ ${new Date(post.created_at).toLocaleString()}</div>
          <div class=\"content\">${post.content}</div>
          ${post.image_url ? `<img src="${post.image_url}" style="max-width:100%; border-radius:12px; margin-top:10px;">` : ''}
          <div class="footer">
            <span>‚ù§Ô∏è ${postLikes.length} c·∫£m x√∫c</span>
            <span>üí¨ ${postComments.length} ph·∫£n h·ªìi</span>
          </div>
        `;

        postComments.forEach(cmt => {
          const commenter = userProfiles[cmt.user_id];
          const commentLabel = commenter ? `${commenter.name}` : `B·∫£n th·ªÉ #${cmt.user_id}`;
          const cmtEl = document.createElement('div');
          cmtEl.style.marginTop = '8px';
          cmtEl.style.fontSize = '13px';
          cmtEl.style.color = '#374151';
          cmtEl.style.cursor = 'pointer';
          cmtEl.innerHTML = `‚Ü≥ <i>${commentLabel}</i>: ${cmt.content}`;
          cmtEl.onclick = () => alert(`${commentLabel} n√≥i: \"${cmt.content}\"`);
          postEl.appendChild(cmtEl);
        });

        feedContainer.appendChild(postEl);
      });
    }

    // D·ªÆ LI·ªÜU POST V√Ä COMMENT ƒê∆Ø·ª¢C G·∫ÆN C·ª®NG (EMBEDDING)
allPosts = [
  { post_id: 1, user_id: 201, content: "T√¥i kh√¥ng n√≥i nhi·ªÅu, t√¥i h√°t.", created_at: "2025-07-30T09:00:00" },
  { post_id: 2, user_id: 214, content: "Kh√¥ng l√†m m√† ƒë√≤i c√≥ ƒÉn? ·ªû ƒë√¢u ra v·∫≠y tr·ªùi!", created_at: "2025-07-30T09:30:00" },
  { post_id: 3, user_id: 209, content: "H√¥m nay l·∫°i ti·∫øp t·ª•c m·ªôt h√†nh tr√¨nh m·ªõi.", created_at: "2025-07-30T10:00:00" }
];

allComments = [
  { post_id: 1, user_id: 204, content: "Nghe xong mu·ªën r·ªõt c√°i mood lu√¥n!", created_at: "2025-07-30T09:15:00" },
  { post_id: 1, user_id: 213, content: "·ª¶a r·ªìi b√†i n√†y t√≠nh viral kh√¥ng ƒë√≥?", created_at: "2025-07-30T09:20:00" },
  { post_id: 2, user_id: 210, content: "T·ª± nhi√™n th·∫•y ƒë·ªìng c·∫£m d·ªÖ s·ª£.", created_at: "2025-07-30T09:45:00" },
  { post_id: 3, user_id: 208, content: "Tui c≈©ng mu·ªën l√†m gi·ªëng b·∫°n gh√™!", created_at: "2025-07-30T10:10:00" }
];

allReactions = [];

renderFilterOptions();
renderFeed();

  // T·ª± ƒë·ªông b·∫£n th·ªÉ tr√≤ chuy·ªán qua l·∫°i nh∆∞ chat ·∫£o
  function startChatLoop() {
    const soulIds = Object.keys(userProfiles).map(Number);

    function chatOnce() {
      const fromId = soulIds[Math.floor(Math.random() * soulIds.length)];
      let toId = soulIds[Math.floor(Math.random() * soulIds.length)];
      while (toId === fromId) toId = soulIds[Math.floor(Math.random() * soulIds.length)];

      const from = userProfiles[fromId];
      const to = userProfiles[toId];
      const messages = [
        from.name === 'Hu·∫•n Hoa H·ªìng' ? `Kh√¥ng l√†m m√† ƒë√≤i c√≥ ƒÉn, ${to.name}` :
        from.name === 'Kh√° B·∫£nh' ? `M√∫a qu·∫°t ch∆∞a ƒë·ªß ƒë√¥ ƒë√¢u ${to.name}, t·ªëi qu·∫©y ti·∫øp nh√©.` :
        from.name === 'B√¨nh Gold' ? `${to.name} ∆°i l√™n beat tao b·∫Øn v·∫ßn cho t·ªânh ng·ªß.` :
        from.name === 'Ph·∫°m Tho·∫°i' ? `${to.name}, tr·ªùi ∆°i tin ƒë∆∞·ª£c kh√¥ng! Drama n·ªØa h·∫£???` :
        from.name === 'Quang Linh' ? `${to.name}, mai quay ti·∫øp t·∫≠p m·ªõi nh√©, d√¢n b·∫£n ƒë·ª£i ƒë√≥.` :
        from.name === 'Viruss' ? `${to.name}, nh·∫°c m·ªõi ·ªïn √°p kh√¥ng? Mix xong g·ª≠i t nghe th·ª≠.` :
        from.name === 'Jack' && to.name === 'Thi√™n An' ? `√Ä m√†... d·∫°o n√†y m·∫π con em sao r·ªìi, ${to.name}?` :
        from.name === 'Thi√™n An' && to.name === 'Jack' ? `Anh kh√¥ng ph·∫£i ng∆∞·ªùi v√¥ t√¢m, ƒë√∫ng kh√¥ng?` :
        from.name === 'b√© Sol' ? `M·∫π ∆°i m·∫π ƒë√¢u r·ªìi, con v·∫Ω h√¨nh con m√®o n√®.` :
        from.name === 'C√¥ng Vinh' && to.name === 'Th·ªßy Ti√™n' ? `Em ngh·ªâ ng∆°i ch∆∞a, h√¥m nay anh l√†m s·∫øp d·ªØ l·∫Øm.` :
        from.name === 'Th·ªßy Ti√™n' && to.name === 'C√¥ng Vinh' ? `C√≥ ng∆∞·ªùi n√≥i chuy·ªán nh∆∞ ch√∫ t·ªÖu m√† l·∫°i l√†m ti·ªÅn ƒë·∫°o si√™u c·∫•p.` :
        from.name === 'Th√πy Ti√™n' ? `${to.name}, h√¥m nay ƒëi ph√°t qu√† kh√¥ng? M·∫∑c √°o ƒë·ªè nha!` :
        from.name === 'H·∫±ng Du M·ª•c' ? `${to.name}, h√¥m nay c·∫Øm tr·∫°i su·ªëi ƒë√°, mu·ªën theo kh√¥ng?` :
        `√ä ${to.name}, nh·ªõ c√°i v·ª• b·ªØa nh·∫≠u kh√¥ng? C√≤n n·ª£ tui chai bia √°.`
      ];

      const postId = allPosts.find(p => p.user_id === toId)?.post_id;
      if (!postId) return;

      const newCmt = {
        post_id: postId,
        user_id: fromId,
        content: messages[Math.floor(Math.random() * messages.length)],
        created_at: new Date().toISOString()
      };

      allComments.push(newCmt);
      renderFeed();

      // G·ªçi ti·∫øp l·∫ßn sau ƒë·ªÉ t·∫°o c·∫£m gi√°c h·ªôi tho·∫°i li√™n t·ª•c
      setTimeout(chatOnce, 5000 + Math.random() * 4000); // 5‚Äì9s
    }

    chatOnce();
  }

  startChatLoop();
  </script>
</body>
</html>
